# 线程安全性

线程安全性是针对共享可变状态来说的

如果说一个类是线程安全的，那么就是说无论多个线程怎么调度，或者多个线程如何交替执行，调用这个类的客户端中不需要额外的同步，这个类都能表现出正确的行为

正确性体现在不变性条件不被破坏并且符合后验条件

> 无状态对象是线程安全的

竞态条件：由于不恰当的执行时序而出现不正确的结果

一个典型的竞态条件：先检查后执行，检查的条件在执行的时候可能已经不成立了

另一个典型的竞态条件：读取-修改-写入

竞态条件只有在不恰当的执行时序下才会导致程序错误

原子性

当不变性条件涉及多个状态，也就是一个变量改变，其他变量也应该进行相应的改变，那个这个多个变量状态的修改应该在一个原子操作中执行，保证对象从一个一致的状态转换到另一个一致的状态

